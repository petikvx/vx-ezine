┌──┌─┐┌──
──┘├─┘──┘ Presents
┐  ┌┐┐┌─┤ VMag, Issue 3, 1 January 1999
└─┘┘ ┘└─┘ ─────────────────────────────

   Структура DN Phone Book (file dn.phn)

   Да,  я действительно когда-то забыл пароль к своей записной книжке, и
именно это послужило причиной файла, который ты, коллега, читаешь. Итак,
прежде  всего  пару  слов  о  так  называемом пароле.  Внутри dn.phn  он
элементарно ксорится с последовательностью байт:

   CA FE C0 E9 CE F8 C2 F0 ED C1 F7 CF E0 C5 F1

   что и было обнаружено при пароле,  состоящем только из ASCII 0. Вьюер
;-) прилагается в виде phonepsw.asm
   Я  не гарантирую абсолютную правильность данного текста не только для
будущих,  но я даже для текущих версий Dos Navigator, ибо вся информация
была  получена  методом  проб  и  ошибок,  то  есть  тупым  ковырянием и
экспериментами.
   Примечания:  1. {A} я обозначаю так называемую LString - типичную для
паскаля структуру,  которая состоит из длины строки,  за которой следует
эта сама строка. Например, {'abcd'} = 4,'abcd' 2. Если LString пропущена
в  dn.phn,  то  она обозначается как ASCII 0,  то  есть {''} =  0,''  3.
Примеры  для  нижеупомянутого словосочетания "округленное до  ближайшего
десятка в большую сторону": для 7 это будет 10, для 116 - 120, для 201 -
210 etc.

   Итак, собственно структура записной книжки от RIT Labs:

   --- Первая запись (сведения о группах телефонов)
   D3 14
   [количество групп телефонов] 00
   [количество групп  телефонов,  округленное до  ближайшего  десятка  в
большую сторону] 00
   0A 00

   --- Первая группа
   8A 20
   {имя группы}
   {1-я строка комментария}
   {2-я строка комментария}
   {поксоренный пароль на доступ к группе}

   --- Сведения о телефонах
   D3 14
   [количество телефонов] 00
   [количество телефонов,  округленное до  ближайшего десятка в  большую
сторону] 00

   После чего расположены сами имена/телефоны/комментарии, причем первая
запись в каждой группе телефонов должна быть обязательно такой:
   A2 1C 01 20 02 2E 2E 11 20 'Return to Groups' 00

   После этой записи идут остальные,  пронумерованные как вторая и далее
(то  есть  необходимо  учитывать  эту  запись  при  подсчете  количества
телефонов в группе):

   --- Вторая запись - первый реальный телефон
   A2 1C
   {телефон}
   {имя}
   {1-й комментарий}
   {2-й комментарий}
   [...остальные телефоны...]

   --- Последний телефон

   [...остальные группы...]

   --- Последняя группа

   01 01


   Вот и все! Пишите письма...

   (c) 1997 Denis Vechersky, 2:450/142@FidoNet
