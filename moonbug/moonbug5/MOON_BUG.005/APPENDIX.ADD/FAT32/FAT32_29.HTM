<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<TITLE>SetDPB_SetAllocInfo (FAT32)</TITLE>
<META NAME="MS-HKWD" CONTENT="SetDPB_SetAllocInfo (FAT32)">
<META NAME="MS-HAID" CONTENT="funcs_0000000101001c00">
</HEAD>
<BODY BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF">
<FORM name=x>
<OBJECT name=iv classid="clsid:9c2ac687-ceef-11cf-96d9-00a0c903b016">
</OBJECT>
</FORM>
<FONT FACE="ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="funcs_0000000101001c00"></A>SetDPB_SetAllocInfo (FAT32) </H2>
<P>
[Windows 95 only.]
<P>
Sets the dpb_free_cnt and dpb_next_free fields in the DPB. 
<P>
This sub-function is called when the SetDPB_Function field of the <A HREF="fat32_43.htm">SDPDFormatStruc
(FAT32)</A> structure is set to 0. 
<H4>Return Values</H4>
<P>
Clears the carry flag and sets the dpb_free_cnt and dpb_next_free fields in
the DPB based upon the values in the SetDPB_Value1 and SetDPB_Value2 fields
within the Set_DPB_ForFormat structure. 
<H4>Remarks</H4>
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>SetDPB_Value1 Setting</B> 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Result within DPB</B> 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
0 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Does not change the dpb_free_cnt field. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
0xFFFFFFFF 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Sets dpb_free_cnt to unknown. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
(any other value) 
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Sets dpb_free_cnt to the specified value if it is a valid cluster count for
the drive,. 
</FONT></TABLE>
<P>
The free cluster count cannot be explicitly set to zero by this call. This can
only be done by setting SetDPB_Value1 to 0xFFFFFFFF, which forces the free
space to be re-computed. Also, setting this value improperly causes the free
count value to be reported improperly by GetDiskFreeSpace. The settings of 0
or 0xFFFFFFFF are recommended. 
<TABLE>
<TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>SetDPB_Value2 Setting</B>
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
<B>Result within DPB</B> 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
0
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Does not change the dpb_next_free field. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
0xFFFFFFFF
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Sets dpb_next_free to force the cluster search to begin at the beginning of
the FAT. 
</FONT><TR VALIGN=top>
<TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
(any other value)
</FONT><TD><FONT FACE="ARIAL,HELVETICA" SIZE="2">
<P>
Sets dpb_next_free to the given value if it is a valid cluster number for the
drive. This causes the search for free clusters to begin at the specified
cluster. 
</FONT></TABLE>
<P>
The assembler calling sequence for all Int 21h 7304h sub-functions is almost
identical. See the main listing for a sample. (<A HREF="fat32_28.htm">Int
21h Function 7304h Set_DPBForFormat (FAT32)</A>) 
<P></FONT>
</BODY>
</HTML>
