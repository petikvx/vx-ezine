 История одного ГУ или Правдивая Ложь                        by Brother Hack

 Приветсвую Вас. Меня зовут Brother Hack.  Хочу Вам рассказать одну историю,
недавно услышанную мною и несущую глубоко поучительный смысл. Для человека,
рассказавшего мне эту историю, английский язык - родной, поэтому я привожу
некоторые выражения в оригинале, чтобы не быть неправильно понятым.

1. The Start

 Все это началось с того, что я решил на досуге почитать конференцию сети
Fidonet RU.HACKER [3]. Работы не было, честно сказать, заскучал. А тут как
раз какие-то горе-писатели развернули тему про взлом порно-сайтов. Тема уже
достаточно надоевшая, однако все-таки некоторые интересные моменты можно
найти. Как-то например светлая мысль про .htaccess.  Именно .htaccess нам
практически не нужен (ну что там интересно? :-), но вот .htpasswd - это
совсем другое дело. Идея заключалась в том, чтобы вытащить .htaccess с
любого URL типа http://www.porno-site.com/members/.htaccess. Неплохо,
правда? Жаль, что расчитываем только на старые Apache. В более-ли-менее
новых версиях Вы этого не сделаете.

2. How was that?

 Хм, появилась проблема - не ходить же по порно-сайтам и не пробовать же
на них вот это?? (честно говоря, на первых двух это еще было весело, но
потом мне надоело :-). Значит тут должна быть подсказка. И как ни странно
подсказкой был http://ftpsearch.ntnu.no, а в основном его лучшая часть -
http://ftpsearch.city.ru.  Большое число Web-серверов - это виртуальные
сервера, и большие host-сервера дают возможность upload через ftp. Вывод,
ищем .htpasswd, htpasswd и service.pwd через ftpsearch-engine. Опять же
получаем довольно большой список таковых.  Например, наиболее интересные
для меня:

* ftp://ftp.isys.hu/customers/virtuals/jobbank/public_html/cv/.htpasswd
albena_vas/albena, alvaro/alvaro, xapelli/xapelli, alexandervink/alexande,
tatiana/tatiana, shanky/shanky, Simon/Simon, tomp/tom, MIROSLAV/MIRO

* ftp://ftp.isys.hu/customers/virtuals/jobbank/public_html/employers/.htpasswd
Uniservice/uniservi, Chris/Chris, Grafika/grafika, Patika/patika,
GandG/gandg, iSYS/isys, Makra/Makra, ERBE/erbe, pharmafontana/pharmafo

* ftp://ftp.borg.com/business/mele/www/sales/.htpasswd

* ftp://ftp.bmi.net/john/.htpasswd

* ftp://ftp.microserve.net/popaccts/h/fallof/www/.htpasswd

* ftp://ftp.dds.be/distributors/_vti_pvt/service.pwd

* ftp://ftp.access.digex.net/pub/access/cps/misc/.htpasswd

 Вообще таких вещей очень много. Меня на все не хватило :-) Кстати, таким
же образом был получен доступ к billing-серверам американского online-store
(магазина) и были получены номера кредитных карточек со всей сопутсвующей
информацией. Правда не мной, т.к. эта техника довольно популярна. Прилагается
небольшой список актуальных по expire date. [1] (thanks to rewt). Я же,
таким образом, нашел пару архивов номеров кредитных карточек различных ISP
в США.

3. Too Silly to be Actual

 Да, в конце концов и это начинает надоедать. Хочется большего. И тут-то
я вспомнил про "вездесущий" backup. Этот процесс существует везде, и без
него не обходится никто.  К сожалению (для администраторов) многие из них
любят делать это на public-access серверах. Что и говорить, сам когда-то
грешил этим. Как найти backup? Хм. Интересный вопрос. Можно начать с поиска
master.passwd, shadow и развивать данную тему.  Пересмотрев три-четыре таких
файлов (большей своей частью они - fake) я напал на:

* ftp.colostate.edu/etc/old/passwd
stew/McDuff

Ударив этим прямо по host-серверу ничего интересного не получил, а развивать
тему не особенно хотелось, хоть и AIX мне интересен. Если кто-то решит заняться
и ему повезет, буду готов обменяться информацией :-) Но тут-то я нашел кое-что
гораздо более интересное. Имени называть не буду, т.к. это актуально и по
сей день, но технологией и некотрыми подробностями поделюсь.

4. The Target

* ftp.make-me-laugh.ru/backup/etc/passwd
evgen/Ujkjd, maxon/burbon, boris/System, julia/julic, roman/romman

 Вот оно, именно то, что мне было нужно. Подобрав пароли (стандартный DES,
пару словариков и single-mode у John the Ripper :-), я сразу же проверил
их на "родном" сайте:

* 10.0.0.2 [2]
evgen/Ujkjd

 Других пользователей тут не оказалось. Сервером оказался FreeBSD 3.1-RELEASE,
andrew был в wheel, но root пароль я не получил. Зато неплохо изучил повадки
администраторов, как-то ходить под root через telnet, писать дурацкие скрипты
на Perl и маленькие программки на C и т.д. :-) Ну это скучно.  Должно же быть
что-то еще?  Найти это "что-то" непростая задача, если использовать pick-
технику, т.е. используя часто употребляемые имена, пробовать пробивать
следущие сервера в данном сегменте (proxy, mail, smtp, pop3 и т.д.).
 Ответом была DNS зона прямо с name сервера.  Должен заметить, что 75% name
серверов данного сегмента зону скачать не дали, что значит, что они
сконфигурированы совершенно правильно с точки зрения security. Однако остались
эти 25% которые свели на "нет" все старания администратов сегмента.
 Самое интересное из того, что я получил:

* 10.0.0.1
maxon/burbon

 Cisco маршрутизатор, один из наиболее простых - 2509. Enable получить еще
не смог. Хотя и это проблемы не составит, просто решение будет немного
сложным и прийдет не сразу.

* 10.0.0.3
evgen/Ujkjd, maxon/burbon, boris/System

 FreeBSD 3.2-RELEASE, довольно вылизанная. Имеет те же проблемы, что и у
10.0.0.1. Ничего интересного. На момент написания статьи boris заблокирован.

* 10.0.0.7

 Осталося один Linux сервер - довольно старый, с старым wu-ftpd, но без
единого известного мне пароля. Вскоре и он станет "моим" - однако, не стоит
забегать вперед.

* 10.0.0.4
Administrator/Ujkjd

 Сервер под Windows NT, обслуживающий Web (http) запросы. Как я понял, есть
чьим-то workstation. Получен вход уровня Administrator, со всеми доступными
(share) ресурсами и write-avaible дисками. Wow, NetBus is coming! :-)
 Кроме того, в этом сегменте находится еще около 5-6 серверов с open (shared)
(открытыми) ресурсами по отношению к 10.0.0.4. Вывод напрашивается сам собой.
Тут будет и sniffer, и NetBus и все остальное добро.

5. Show must go on

 Именно. Шоу будет продолжаться до победного конца. И цель его вовсе не
уничтожение компьютерной, а если быть точнее, Internet инфраструктуры
России (также как и других стран), а только укрепление ее. За все время
нахождения внутри этого сегмента ни один ресурс не был испорчен, ни на
секунду ни один сервис не перестал функционировать по вине intruder
(взломщика). Эти ресурсы даже не были использованы как перевалочный пункт
(track point) для взлома других серверов и процессорная мощность не была
использована для подбора паролей :-)
 Пару слов о шоу, как таковом. В таком положении, к сожалению, оказывается
большинство российских ISP. Как, например, довольно крупный питерский ISP -
DUX (http://www.dux.net). Почта клиентов, Web-сервера клиентов доступны
через ftp с anonymous входом. Мне, лично, уже надоело читать почту написанную
на postmaster@dux.net с просьбой закрыть этот "сервис". У многих пользователей
в mail box находятся login и password на различные сервера, типа hotmail.com
и тому подобных.
 Плохо это. Плохо.

 Приложения

[1]. cc.zip. Лежит в bonus/cc/

[2]. Последнее число в IP остается неизменным. Я и так дал достаточно
информации, чтобы этот сервер можно было найти и попасть туда. Пусть это
будет наградой самым трудолюбивым и настойчивым :-)

[3]. Автор оригинала - выходец из России, ныне живущий в США. Поэтому,
пусть никого не удивляет, что он читает русскоязычные конференции :-)

